---
sidebar_position: 1
---

# Overview

|                                                                               | Android                                                                                                                                                                                                                                                                                   | iOS                                                                                                                                                                                                                                                                                                                  | Flutter                                                                                                                                                                                                                                                                                                       |
|-------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Official paskeys implementation advice                                        | [Android Developer](https://developer.android.com/training/sign-in/passkeys)                                                                                                                                                                                                              | [Apple Developer](https://developer.apple.com/documentation/authenticationservices/public-private_key_authentication/supporting_passkeys)                                                                                                                                                                            | None yet, use the platform specific solution                                                                                                                                                                                                                                                                  |
| Requires whitelisting of passkey API endpoint                                 | No                                                                                                                                                                                                                                                                                        | Yes - via AASA (Apple App Site Association)                                                                                                                                                                                                                                                                          | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Allows sharing of passkeys with web app                                       | Yes - via Digital Asset Links                                                                                                                                                                                                                                                             | Yes - via AASA (Apple App Site Association)                                                                                                                                                                                                                                                                          | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Allows interception of link from email magic link                             | Yes - via Digital Asset Links                                                                                                                                                                                                                                                             | Yes - via AASA (Apple App Site Association)                                                                                                                                                                                                                                                                          | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Name of link interception ("Open link directly in native app")                | Android App Links                                                                                                                                                                                                                                                                         | Universal Linking                                                                                                                                                                                                                                                                                                    | <ul><li>Related to [deep linking](https://docs.flutter.dev/development/ui/navigation/deep-linking)</li><li>[Prior approach](https://medium.com/flutter-community/deep-links-and-flutter-applications-how-to-handle-them-properly-8c9865af9283)</li></ul>                                                      |
| Location of association file                                                  | `your-domain.com/.well-known/assetlinks.json`                                                                                                                                                                                                                                             | `your-domain.com/.well-known/apple-app-site-assocation`                                                                                                                                                                                                                                                              | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| File cached                                                                   | Yes (by Play Services)                                                                                                                                                                                                                                                                    | Yes (since iOS 14), initial sync may take up to 24 hours                                                                                                                                                                                                                                                             | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| By-pass possible                                                              |                                                                                                                                                                                                                                                                                           | Yes, with alternate mode section                                                                                                                                                                                                                                                                                     | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Testable with                                                                 | [Google API](https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://www.facebook.com&relation=delegate_permission/common.handle_all_urls)                                                                                                                    | [Branch.io](https://branch.io/resources/aasa-validator/)                                                                                                                                                                                                                                                             | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| App identifier example                                                        | SHA-256 fingerprint E3:F9:E1:E0:CF:99:D0:E5: 6A:05:5B:A6:5E:24:1B:33: 99:F7:CE:A5:24:32:6B:0C: DD:6E:C1:32:7E:D0:FD:C1                                                                                                                                                                    | TeamID.bundleID `T84QZS65DQ.com.facebook.Messenger`                                                                                                                                                                                                                                                                  | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Where to find identifier                                                      | <ul><li>When already uplodaed: Google Play Console > Release management > App signing</li><li>Local: `keytool -list -v -keystore <keystore path> -alias <key alias> -storepass <store password> -keypass <key password>`</li></ul>                                                        | The Team ID can be found in the developer account on developer.apple.com and the bundle identifier is the exact name from within the Xcode project                                                                                                                                                                   | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Name of section that links native app to web app                              | `delegate_permission/ common.handle_all_urls`                                                                                                                                                                                                                                             | `applinks`                                                                                                                                                                                                                                                                                                           | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Name of section that allows credential sharing between native app and web app | `delegate_permission/ common.get_login_creds`                                                                                                                                                                                                                                             | `webcredentials`                                                                                                                                                                                                                                                                                                     | Platform-specific solution                                                                                                                                                                                                                                                                                    |
| Registry of association files                                                 | List hostnames with `<data>`-entry in AndroidManifest.xml in the specific activity (part of Android-App source-Code). The `<intent-filter android:autoVerify="true">` needs to be `autoVerify=true`. [(Source)](https://developer.android.com/training/app-links/verify-android-applinks) | Enable and add associated domain in Xcode development environment (setting of property to generate entitlements file)[(Source)](https://developer.apple.com/documentation/authenticationservices/connecting_to_a_service_with_passkeys)                                                                              | <ul><li>Android: Add `flutter_deeplinking_enabled` to AndroidManifext.xml [(Source)](https://docs.flutter.dev/cookbook/navigation/set-up-app-links)</li><li>iOS: Add `FlutterDeepLinkinEnabled=true` to Info.plist. [(Source)](https://docs.flutter.dev/cookbook/navigation/set-up-universal-links)</li></ul> |
| Helpful external tutorials on native passkey implementation                   |                                                                                                                                                                                                                                                                                           | <ul><li>[Quick guide on associated domains in iOS](https://tanaschita.com/20220725-quick-guide-on-associated-domains-in-ios/)</li><li>[Passkeys iOS Developer Guide](https://tanaschita.com/20230227-passkeys-ios-developer-guide)</li><li>[iOS Passkeys](https://quickbirdstudios.com/blog/ios-passkeys/)</li></ul> |                                                                                                                                                                                                                                                                                                               |
| Ongoing development within platform                                           | Android 14 introduces [third party access to passkeys](https://www.dashlane.com/blog/dashlane-passkey-support-android) with [example application](https://github.com/Dashlane/android-passkey-example) that stores public keys only offline and uses new Credential API).                 |                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                               |

## Handle links in native apps

The minimum function for a passwordless native app would be:

- Register passkeys on the correct `rpID` so that the respective website can access the passkeys and vice versa.
- Open magic links directly in the native app: when a magic link in an email from Corbado is clicked the app is opened
  immediately (the app needs to handle the incoming link and talk to Corbado's frontend API)
    - Catch 1: The Link in the email is the Application URL, so it is the URL were the web components are included. If
      none is
      specified or it' in testing mode, the hosted page is used. As soon as the user enters an Application URL the email
      magic link will change. Therefore the associated link will not work and nothing triggered.
    - Catch 2: If we use exactly the same link in an email magic link from desktop and mobile browser the native app
      will always be opened to handle the authentication, therefore a login in mobile browser will always be
      intercepted. The following options exist:
      - Ignore
      - Generate a different path if email magic link is called from a native application, for example with path `/nativelinking/` and
        register the links only on the specific path and only then trigger the native app.
      - In any case: if no app is installed the default browser will be opened automatically.
